<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Properties | Alture & Co.</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Montserrat:wght@200;300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/properties.css">
    <style>
        /* Styles spécifiques qui doivent rester en ligne */
        .logo span {
            color: #D14D72;
        }
        
        .properties-grid {
        }
        
        /* Styles spécifiques qui doivent rester en ligne */
        .feature div {
            color: #666;
            font-size: 0.9rem;
            font-family: 'Montserrat', sans-serif;
        }
        
        .pink-amp {
            color: #D14D72;
            font-weight: 400;
        }
        
        @media (max-width: 768px) {
            .properties-hero {
                padding: 150px 20px 80px;
            }
            
            .properties-grid {
                grid-template-columns: 1fr;
            }
            
            .property-features {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .feature {
                flex: 0 0 calc(50% - 10px);
            }
        }
        </style>
</head>
<body>
    <!-- Préchargeur -->
    <div class="preloader">
        <div class="preloader-inner">
            <div class="loading-text">
                <span class="char">L</span>
                <span class="char">O</span>
                <span class="char">A</span>
                <span class="char">D</span>
                <span class="char">I</span>
                <span class="char">N</span>
                <span class="char">G</span>
            </div>
        </div>
    </div>
    
    <!-- Barre de progression -->
    <div class="progress-container">
        <div class="progress-bar" id="myBar"></div>
    </div>
    <!-- Préchargeur -->
    <div class="preloader">
        <div class="preloader-inner">
            <div class="loading-text">
                <span class="char">L</span>
                <span class="char">O</span>
                <span class="char">A</span>
                <span class="char">D</span>
                <span class="char">I</span>
                <span class="char">N</span>
                <span class="char">G</span>
            </div>
        </div>
    </div>
    
    <!-- Barre de progression -->
    <div class="progress-container">
        <div class="progress-bar" id="myBar"></div>
    </div>
    <header>
        <div class="header-container">
            <div class="logo">

                <a href="index.html" id="simple-logo">
                    <span id="simple-logo-short">A<span class="pink-amp">&</span>C</span>
                    <span id="simple-logo-full">Alture <span class="pink-amp">&</span> Co.</span>
                </a>
            </div>
            <button class="menu-toggle" aria-label="Menu">
                <span class="menu-line"></span>
                <span class="menu-line"></span>
                <span class="menu-line"></span>
            </button>
            <nav>
                <a href="index.html">Home</a>
                <a href="#" style="color: #D14D72;">Properties</a>
                <a href="index.html#contact">Contact</a>
            </nav>
        </div>
    </header>
    
    <section class="properties-hero">
        <div class="hero-content">
            <h1>Our Exclusive Properties</h1>
            <p>Discover our handpicked selection of luxury properties around the world</p>
            <a href="#properties" class="btn">View Properties</a>
        </div>
    </section>
    
    <!-- Galerie Modale -->
    <div id="galleryModal" class="modal">
        <!-- Bouton de fermeture -->
        <button class="close-modal" aria-label="Close" onclick="closeModal()">
            <i class="fas fa-times"></i>
        </button>
        
        <!-- Flèches de navigation -->
        <button class="nav-arrow prev" aria-label="Previous image" onclick="prevImage()">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button class="nav-arrow next" aria-label="Next image" onclick="nextImage()">
            <i class="fas fa-chevron-right"></i>
        </button>
        
        <div class="modal-content">
            <!-- Conteneur principal de la galerie -->
            <div class="gallery-container">
                <!-- Image principale -->
                <div class="gallery-main">
                    <img id="mainImage" src="" alt="Property Image" loading="eager">
                </div>
                
                <!-- Informations de la propriété -->
                <div class="property-info">
                    <h2 id="propertyTitle"></h2>
                    <p class="property-price"><span class="currency">AED</span> <span id="propertyPrice"></span></p>
                    <p class="property-location" id="propertyLocation"></p>
                    <p class="property-description" id="propertyDescription"></p>
                    
                    <div class="property-features" id="propertyFeatures">
                        <!-- Les caractéristiques seront ajoutées dynamiquement -->
                    </div>
                    
                    <a href="#contact" class="btn btn-primary">
                        Contact Us <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                
                <!-- Miniatures -->
                <div class="gallery-thumbnails" id="galleryThumbnails">
                    <!-- Les miniatures seront ajoutées dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <div id="properties" class="properties-container">
        <h2>Featured Properties</h2>
        <div class="properties-grid">
            <!-- Five Palm Jumeirah Property -->
            <div class="property-card">
                <div class="property-image-container">
                    <img src="images/Five palm Jumeirah 3BED/image0.jpeg" alt="Five Palm Jumeirah" class="property-image">
                    <button class="view-gallery-btn" onclick="openGallery('five-palm-jumeirah')">View Gallery</button>
                </div>
                <div class="property-details">
                    <h3 class="property-title">Five Palm Jumeirah</h3>
                    <p class="property-location"><i class="fas fa-map-marker-alt"></i> Dubai, Palm Jumeirah</p>
                    <p class="property-price">AED 10,000,000.00</p>
                    <p class="property-description">Exclusive 3-bedroom residence with stunning sea views, luxury finishes, and access to world-class amenities in one of Dubai's most prestigious locations.</p>
                    <div class="property-features">
                        <div class="feature">
                            <i class="fas fa-bed"></i>
                            <div>3 Beds</div>
                        </div>
                        <div class="feature">
                            <i class="fas fa-bath"></i>
                            <div>3.5 Baths</div>
                        </div>
                        <div class="feature">
                            <i class="fas fa-ruler-combined"></i>
                            <div>2,770 Sq Ft</div>
                        </div>
                        <div class="feature">
                            <i class="fas fa-swimming-pool"></i>
                            <div>Pool View</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <div class="footer-logo">
                        <a href="index.html">Alture & Co.</a>
                    </div>
                    <p>Luxury real estate in Dubai's most exclusive locations.</p>
                    <div class="social-links">
                        <a href="https://wa.me/971509845622" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                        <a href="https://www.instagram.com/altureco" aria-label="Instagram" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3 class="footer-heading">Contact</h3>
                    <ul class="footer-contact">
                        <li>
                            <i class="fab fa-whatsapp"></i>
                            <a href="https://wa.me/971509845622">+971 50 984 5622</a>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <a href="mailto:info@altureco.com">info@altureco.com</a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2023 Alture & Co. All rights reserved. | <a href="privacy-policy.html">Privacy Policy</a></p>
            </div>
        </div>
    </footer>
    
    <script>
        // Données de la propriété Five Palm Jumeirah
        const propertyData = {
            'five-palm-jumeirah': {
                title: 'Five Palm Jumeirah',
                price: 'AED 10,000,000.00',
                description: '3 Bedroom, 10th Floor | Five Palm Jumeirah\n\n3 Bedrooms + Maid\'s Room, 2,770 Sq Ft\n\nFully Furnished\n\nCorner Unit with Sea & Palm View\n\n2 Parking Spaces\n\n2 Large Balconies, including 1 with Jacuzzi\n\nArea: 2,770 Sq Ft\n\nVacant on Transfer',
                images: [
                    'images/Five palm Jumeirah 3BED/image0.jpeg',
                    'images/Five palm Jumeirah 3BED/image1.jpeg',
                    'images/Five palm Jumeirah 3BED/image2.jpeg',
                    'images/Five palm Jumeirah 3BED/image3.jpeg',
                    'images/Five palm Jumeirah 3BED/image4.jpeg',
                    'images/Five palm Jumeirah 3BED/image5.jpeg',
                    'images/Five palm Jumeirah 3BED/image6.jpeg',
                    'images/Five palm Jumeirah 3BED/image7.jpeg',
                    'images/Five palm Jumeirah 3BED/image8.jpeg',
                    'images/Five palm Jumeirah 3BED/image10.jpeg'
                ]
            }
        };

        // Variables globales pour la navigation dans la galerie
        let currentProperty = null;
        let currentImageIndex = 0;
        let propertyImages = [];
        let isModalOpen = false;
        let modalCloseTimeout = null;
        let touchStartX = 0; // Pour la détection du glissement sur mobile

        // Fonction pour afficher une image spécifique
        function showImage(index) {
            const mainImage = document.getElementById('mainImage');
            const thumbnails = document.querySelectorAll('.thumbnail');
            
            if (index >= 0 && index < propertyImages.length) {
                // Mettre à jour l'index courant
                currentImageIndex = index;
                
                // Ajouter une classe de chargement
                mainImage.classList.remove('loaded');
                
                // Changer l'image après un court délai pour le fondu
                setTimeout(() => {
                    // Charger la nouvelle image
                    const img = new Image();
                    img.onload = function() {
                        mainImage.src = this.src;
                        mainImage.alt = propertyImages[index].alt || `Image ${index + 1}`;
                        mainImage.classList.add('loaded');
                        
                        // Mettre à jour la miniature active
                        updateActiveThumbnail(index);
                    };
                    img.src = propertyImages[index].src || propertyImages[index];
                    
                }, 150);
            }
        }
        
        // Fonction pour mettre à jour la miniature active
        function updateActiveThumbnail(index) {
            const thumbnails = document.querySelectorAll('.thumbnail');
            thumbnails.forEach((thumb, i) => {
                if (i === index) {
                    thumb.classList.add('active');
                    // Faire défiler jusqu'à la miniature active si nécessaire
                    const container = thumb.parentElement;
                    const containerRect = container.getBoundingClientRect();
                    const thumbRect = thumb.getBoundingClientRect();
                    
                    if (thumbRect.left < containerRect.left || thumbRect.right > containerRect.right) {
                        thumb.scrollIntoView({
                            behavior: 'smooth',
                            block: 'nearest',
                            inline: 'center'
                        });
                    }
                } else {
                    thumb.classList.remove('active');
                }
            });
        }

        // Fonction pour afficher l'image suivante
        function nextImage() {
            if (!isModalOpen || !propertyImages.length) return;
            const newIndex = (currentImageIndex + 1) % propertyImages.length;
            showImage(newIndex);
        }

        // Fonction pour afficher l'image précédente
        function prevImage() {
            if (!isModalOpen || !propertyImages.length) return;
            const newIndex = (currentImageIndex - 1 + propertyImages.length) % propertyImages.length;
            showImage(newIndex);
        }

        // Gestionnaire d'événements pour les touches du clavier
        function handleKeyDown(e) {
            if (!isModalOpen) return;
            
            switch(e.key) {
                case 'Escape':
                    e.preventDefault();
                    closeModal();
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    prevImage();
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    nextImage();
                    break;
            }
        }
        
        // Gestionnaires pour le glissement tactile sur mobile
        function handleTouchStart(e) {
            if (!isModalOpen) return;
            touchStartX = e.touches[0].clientX;
        }
        
        function handleTouchEnd(e) {
            if (!isModalOpen) return;
            
            const touchEndX = e.changedTouches[0].clientX;
            const diffX = touchStartX - touchEndX;
            
            // Seuil de glissement pour déclencher le changement d'image (50px par défaut)
            const swipeThreshold = 50;
            
            if (Math.abs(diffX) > swipeThreshold) {
                if (diffX > 0) {
                    nextImage(); // Glissement vers la gauche -> image suivante
                } else {
                    prevImage(); // Glissement vers la droite -> image précédente
                }
            }
        }

        // Fonction pour fermer la modale
        function closeModal() {
            if (!isModalOpen) return;
            
            const modal = document.getElementById('galleryModal');
            if (!modal) return;
            
            // Annuler tout timeout en attente
            if (modalCloseTimeout) {
                clearTimeout(modalCloseTimeout);
                modalCloseTimeout = null;
            }
            
            // Désactiver le défilement fluide pendant la fermeture
            document.body.style.overflow = 'auto';
            document.body.style.paddingRight = '';
            
            // Ajouter la classe de fermeture pour l'animation
            modal.classList.add('closing');
            
            // Attendre la fin de l'animation avant de masquer la modale
            modalCloseTimeout = setTimeout(() => {
                modal.style.display = 'none';
                modal.classList.remove('show', 'closing');
                isModalOpen = false;
                
                // Nettoyer les écouteurs d'événements
                document.removeEventListener('keydown', handleKeyDown);
                document.removeEventListener('touchstart', handleTouchStart, { passive: true });
                document.removeEventListener('touchend', handleTouchEnd, { passive: true });
                
                // Réinitialiser l'index
                currentImageIndex = 0;
                propertyImages = [];
                currentProperty = null;
                
                modalCloseTimeout = null;
            }, 300);
        }

        // Script pour la galerie
        function openGallery(propertyId) {
            console.log('Opening gallery for property:', propertyId);
            const modal = document.getElementById('galleryModal');
            const property = propertyData[propertyId];
            
            if (!property) {
                console.error('Property not found:', propertyId);
                return;
            }
            
            // Nettoyer les écouteurs d'événements précédents
            if (isModalOpen) {
                closeModal();
                // Attendre que la modale soit complètement fermée avant de la rouvrir
                setTimeout(() => openGallery(propertyId), 350);
                return;
            }
            
            // Stocker les informations de la propriété actuelle
            currentProperty = property;
            propertyImages = property.images || [];
            currentImageIndex = 0;
            
            console.log('Property data:', property);
            
            const mainImage = document.getElementById('mainImage');
            const thumbnailsContainer = document.getElementById('galleryThumbnails');
            const propertyTitle = document.getElementById('propertyTitle');
            const propertyPrice = document.getElementById('propertyPrice');
            const propertyLocation = document.getElementById('propertyLocation');
            const propertyDescription = document.getElementById('propertyDescription');
            const propertyFeatures = document.getElementById('propertyFeatures');

            // Mettre à jour les informations de la propriété
            if (propertyTitle) propertyTitle.textContent = property.title;
            if (propertyPrice) {
                propertyPrice.textContent = property.price ? 
                    property.price.toLocaleString() + ' €' : 'Prix sur demande';
            }
            
            if (propertyLocation) {
                propertyLocation.innerHTML = property.location ? 
                    `<i class="fas fa-map-marker-alt"></i> ${property.location}` : '';
            }
            
            if (propertyDescription) {
                propertyDescription.textContent = property.description || '';
            }
            
            // Mettre à jour les caractéristiques
            if (propertyFeatures) {
                propertyFeatures.innerHTML = '';
                
                // Ajouter les caractéristiques dynamiquement depuis l'objet property
                const features = [
                    { icon: 'bed', text: property.beds || 'N/A', tooltip: 'Chambres' },
                    { icon: 'bath', text: property.baths || 'N/A', tooltip: 'Salles de bain' },
                    { icon: 'ruler-combined', text: property.area ? `${property.area} m²` : 'N/A', tooltip: 'Surface' },
                    { icon: 'building', text: property.type || 'N/A', tooltip: 'Type de bien' }
                ];
                
                features.forEach(feature => {
                    if (feature.text && feature.text !== 'N/A') {
                        const featureEl = document.createElement('div');
                        featureEl.className = 'feature-item';
                        featureEl.innerHTML = `
                            <i class="fas fa-${feature.icon}"></i>
                            <span>${feature.text}</span>
                            <span class="tooltip">${feature.tooltip}</span>
                        `;
                        propertyFeatures.appendChild(featureEl);
                    }
                });
            }

            // Vider les miniatures précédentes
            if (thumbnailsContainer) {
                console.log('Conteneur des miniatures trouvé:', thumbnailsContainer);
                thumbnailsContainer.innerHTML = '';
                console.log('Images à afficher:', propertyImages);

                // Ajouter les miniatures
                propertyImages.forEach((image, index) => {
                    console.log('Ajout de la miniature:', image);
                    const thumbnail = document.createElement('div');
                    thumbnail.className = 'thumbnail' + (index === 0 ? ' active' : '');
                    thumbnail.innerHTML = `<img src="${image}" alt="Miniature ${index + 1}" loading="lazy">`;
                    
                    thumbnail.addEventListener('click', (e) => {
                        e.preventDefault();
                        showImage(index);
                    });

                    thumbnailsContainer.appendChild(thumbnail);
                });
                
                // Vérifier si des miniatures ont été ajoutées
                console.log('Nombre de miniatures ajoutées:', thumbnailsContainer.children.length);
            }

            // Afficher la modale avec animation
            if (modal) {
                // Empêcher le défilement du body
                document.body.style.overflow = 'hidden';
                document.body.style.paddingRight = window.innerWidth - document.documentElement.clientWidth + 'px';
                
                // Afficher la modale
                modal.style.display = 'flex';
                
                // Forcer le reflow pour activer la transition
                void modal.offsetWidth;
                
                // Démarrer l'animation d'entrée
                setTimeout(() => {
                    modal.classList.add('show');
                    isModalOpen = true;
                    
                    // Afficher la première image
                    if (mainImage && propertyImages.length > 0) {
                        mainImage.classList.remove('loaded');
                        mainImage.src = propertyImages[0];
                        mainImage.onload = () => {
                            mainImage.classList.add('loaded');
                        };
                        mainImage.alt = property.title || 'Image de la propriété';
                    }
                    
                    // Ajouter les écouteurs d'événements
                    document.addEventListener('keydown', handleKeyDown);
                    document.addEventListener('touchstart', handleTouchStart, { passive: true });
                    document.addEventListener('touchend', handleTouchEnd, { passive: true });
                    
                    // Gestion du clic en dehors de la modale
                    modal.addEventListener('click', function modalClickHandler(e) {
                        if (e.target === modal) {
                            closeModal();
                        }
                    });
                    
                    // Empêcher la propagation du clic sur le contenu
                    const modalContent = modal.querySelector('.modal-content');
                    if (modalContent) {
                        modalContent.addEventListener('click', function(e) {
                            e.stopPropagation();
                        });
                    }
                }, 10);
            }
        }

        // Initialiser les boutons de galerie
        document.querySelectorAll('.view-gallery-btn').forEach(button => {
            button.addEventListener('click', function() {
                openGallery(this.getAttribute('data-property'));
            });
        });

        // Script pour le préchargeur
        document.addEventListener('DOMContentLoaded', function() {
            const preloader = document.querySelector('.preloader');
            if (preloader) {
                preloader.style.opacity = '0';
                preloader.style.visibility = 'hidden';
                
                // Supprimer le préchargeur après l'animation
                setTimeout(() => {
                    preloader.style.display = 'none';
                }, 500);
            }
            
            // Animation de la barre de défilement
            window.onscroll = function() {
                const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (winScroll / height) * 100;
                const scrollProgress = document.querySelector('.scroll-progress');
                if (scrollProgress) {
                    scrollProgress.style.width = scrolled + '%';
                }
            };
            
            // Menu mobile
            const menuToggle = document.querySelector('.menu-toggle');
            const nav = document.querySelector('nav');
            
            // Vérifier si les éléments existent
            if (menuToggle && nav) {
                // Initialiser le menu pour les mobiles
                function initMobileMenu() {
                    if (window.innerWidth <= 992) { // Breakpoint pour le menu mobile
                        nav.style.display = 'none';
                        menuToggle.style.display = 'flex';
                    } else {
                        nav.style.display = '';
                        menuToggle.style.display = 'none';
                    }
                }
                
                // Initialiser au chargement
                initMobileMenu();
                
                // Gérer le clic sur le bouton du menu
                menuToggle.addEventListener('click', function() {
                    nav.style.display = nav.style.display === 'none' || nav.style.display === '' ? 'block' : 'none';
                    menuToggle.classList.toggle('active');
                    
                    // Animation des lignes du bouton
                    const lines = menuToggle.querySelectorAll('.menu-line');
                    if (nav.style.display === 'block') {
                        lines[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
                        lines[1].style.opacity = '0';
                        lines[2].style.transform = 'rotate(-45deg) translate(5px, -5px)';
                        document.body.style.overflow = 'hidden';
                    } else {
                        lines[0].style.transform = '';
                        lines[1].style.opacity = '';
                        lines[2].style.transform = '';
                        document.body.style.overflow = '';
                    }
                });
                
                // Gérer le redimensionnement de la fenêtre
                window.addEventListener('resize', initMobileMenu);
            }
        });
    </script>
    <script>
        // Script pour le défilement fluide
        document.addEventListener('DOMContentLoaded', function() {
            // Désactiver le comportement par défaut des liens avec #
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    // Ne pas empêcher le comportement des liens vers des pages externes
                    if (this.getAttribute('href').startsWith('#') && 
                        this.getAttribute('href') !== '#') {
                        e.preventDefault();
                        
                        const targetId = this.getAttribute('href');
                        const targetElement = document.querySelector(targetId);
                        
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 80, // Ajuster pour le header fixe
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
            
            // Ajouter une classe au header lors du défilement
            const header = document.querySelector('header');
            if (header) {
                window.addEventListener('scroll', function() {
                    if (window.scrollY > 50) {
                        header.style.padding = '10px 0';
                        header.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.1)';
                    } else {
                        header.style.padding = '20px 0';
                        header.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.1)';
                    }
                });
            }
            
            // Ajouter une animation de fondu pour les sections
            const fadeElements = document.querySelectorAll('.property-card');
            const fadeOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const fadeOnScroll = new IntersectionObserver(function(entries, fadeOnScroll) {
                entries.forEach(entry => {
                    if (!entry.isIntersecting) {
                        return;
                    } else {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                        fadeOnScroll.unobserve(entry.target);
                    }
                });
            }, fadeOptions);
            
            fadeElements.forEach(element => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(20px)';
                element.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                fadeOnScroll.observe(element);
            });
        });
    </script>
    <script>
        // Menu Burger
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.querySelector('.menu-toggle');
            const nav = document.querySelector('header nav');
            
            menuToggle.addEventListener('click', function() {
                nav.classList.toggle('active');
                document.body.style.overflow = nav.classList.contains('active') ? 'hidden' : '';
            });
            
            // Fermer le menu quand on clique sur un lien
            document.querySelectorAll('header nav a').forEach(link => {
                link.addEventListener('click', () => {
                    nav.classList.remove('active');
                    document.body.style.overflow = '';
                });
            });
            
            // Fermer le menu quand on clique en dehors
            document.addEventListener('click', function(e) {
                if (!nav.contains(e.target) && !menuToggle.contains(e.target)) {
                    nav.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });
    </script>
</body>
</html>
